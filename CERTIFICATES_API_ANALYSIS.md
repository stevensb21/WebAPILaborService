# –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ PolzaAI

## –û–±–∑–æ—Ä

–í –ø—Ä–æ–µ–∫—Ç–µ PolzaAI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏. –ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## üîç –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. `/api/certificates` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –±–æ—Ç–µ:**
- **–§–∞–π–ª**: `PolzaAi/bot.py` (—Ñ—É–Ω–∫—Ü–∏—è `get_certificate_details`)
- **–§–∞–π–ª**: `PolzaAi/pull_order.py` (—Ñ—É–Ω–∫—Ü–∏—è `parsAllCertificates`)

**–¶–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
1. **–í `get_certificate_details`**: –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö
2. **–í `parsAllCertificates`**: –ü–æ–ª—É—á–µ–Ω–∏–µ ID —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –ø–æ –∏—Ö –Ω–∞–∑–≤–∞–Ω–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–æ–∫

**–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –ø–æ–ª—è:**
```json
{
  "id": 1,
  "name": "–í–ò–¢–† (–û–¢)",
  "description": "–í–≤–æ–¥–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂ –ø–æ —Ç–µ—Ö–Ω–∏–∫–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
  "expiry_date": 1,
  "created_at": "2024-01-01T00:00:00.000000Z",
  "updated_at": "2024-01-01T00:00:00.000000Z"
}
```

### 2. `/api/people-certificates` - –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Å –ª—é–¥—å–º–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –±–æ—Ç–µ:**
- **–§–∞–π–ª**: `PolzaAi/pull_order.py` (—Ñ—É–Ω–∫—Ü–∏—è `updatePerson`)

**–¶–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞—è–≤–æ–∫

**–û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
  "people_id": 123,
  "certificate_id": 456,
  "assigned_date": "2024-01-15",
  "certificate_number": "–°–ï–†–¢-001",
  "notes": "–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É"
}
```

## üìä –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### –í –∫–æ–º–ø–∞–∫—Ç–Ω–æ–º API `/api/people/compact`

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:**
- `id` - ID —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞  
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- `assigned_data.assigned_date` - –î–∞—Ç–∞ –≤—ã–¥–∞—á–∏
- `assigned_data.status` - –°—Ç–∞—Ç—É—Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

**–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è (—É–±—Ä–∞–Ω—ã –∏–∑ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ API):**
- `expiry_date` - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–≤ –≥–æ–¥–∞—Ö)
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `certificate_number` - –ù–æ–º–µ—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- `notes` - –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- `certificate_file` - –§–∞–π–ª —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

### –í –ø–æ–ª–Ω–æ–º API `/api/people`

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:**
- –í—Å–µ –ø–æ–ª—è –∏–∑ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ API
- `certificate_number` - –ù–æ–º–µ—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- `notes` - –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- `certificate_file` - –§–∞–π–ª —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ API –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

**–¢–µ–∫—É—â–∏–π —ç–Ω–¥–ø–æ–∏–Ω—Ç**: `/api/certificates`
**–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–π**: `/api/certificates/compact`

**–ü–æ–ª—è –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ API:**
```json
{
  "id": 1,
  "name": "–í–ò–¢–† (–û–¢)",
  "description": "–í–≤–æ–¥–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂ –ø–æ —Ç–µ—Ö–Ω–∏–∫–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
}
```

**–£–±—Ä–∞—Ç—å –ø–æ–ª—è:**
- `expiry_date` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –±–æ—Ç–µ
- `created_at` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –±–æ—Ç–µ  
- `updated_at` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –±–æ—Ç–µ

### 2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –±–æ—Ç–µ

**–í —Ñ—É–Ω–∫—Ü–∏–∏ `get_certificate_details`:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ API –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

**–í —Ñ—É–Ω–∫—Ü–∏–∏ `parsAllCertificates`:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ API
- –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ß–∞—Å—Ç–æ—Ç–∞ –≤—ã–∑–æ–≤–æ–≤ API —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:

1. **`/api/certificates`** - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏:
   - –û—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –≥–æ—Ç–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö
   - –°–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫
   - –ü–æ–ª—É—á–µ–Ω–∏–∏ –æ–ø–∏—Å–∞–Ω–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

2. **`/api/people-certificates`** - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏:
   - –û–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞—è–≤–æ–∫ –Ω–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
   - –°–≤—è–∑—ã–≤–∞–Ω–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏

### –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:

**–ü–æ–ª–Ω—ã–π API —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤** (~200 –±–∞–π—Ç –Ω–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç):
```json
{
  "id": 1,
  "name": "–í–ò–¢–† (–û–¢)",
  "description": "–í–≤–æ–¥–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂ –ø–æ —Ç–µ—Ö–Ω–∏–∫–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
  "expiry_date": 1,
  "created_at": "2024-01-01T00:00:00.000000Z",
  "updated_at": "2024-01-01T00:00:00.000000Z"
}
```

**–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π API —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤** (~100 –±–∞–π—Ç –Ω–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç):
```json
{
  "id": 1,
  "name": "–í–ò–¢–† (–û–¢)",
  "description": "–í–≤–æ–¥–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂ –ø–æ —Ç–µ—Ö–Ω–∏–∫–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
}
```

**–≠–∫–æ–Ω–æ–º–∏—è**: ~50% —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

## üîß –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ API –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```php
// –í CertificateController.php
public function compact(Request $request)
{
    $certificates = Certificate::select('id', 'name', 'description')->get();
    return response()->json($certificates);
}
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ API

```python
# –í bot.py –∏ pull_order.py
response = requests.get(f"{BASE_URL}/api/certificates/compact")
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
# –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –Ω–∞ 1 —á–∞—Å
@lru_cache(maxsize=1)
def get_cached_certificates():
    # –ó–∞–ø—Ä–æ—Å –∫ API
    pass
```

## üìã –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

1. **API —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ** –≤ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö
2. **–ú–Ω–æ–≥–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª–µ–π** –≤ —Ç–µ–∫—É—â–µ–º API
3. **–í–æ–∑–º–æ–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** —á–µ—Ä–µ–∑ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ API
4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø–æ–º–æ–∂–µ—Ç —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
5. **–≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞** —Å–æ—Å—Ç–∞–≤–∏—Ç ~50% –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ API

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ API –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ç–æ–º—É, –∫–∞–∫ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –ª—é–¥–µ–π.
